<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>ScanbotSDK Vanilla.js Example</title>
</head>

<body style="margin: 0">

<div class="header">ScanbotSDK Vanilla.js Example</div>
<div class="scanner-button-container">
    <div class="scanner-button" id="document-classic">Classic UI Document Scanner</div>
    <div class="scanner-button" id="barcode-rtuui">RTU-UI Barcode Scanner</div>
    <div class="scanner-button" id="license-info">License Info</div>
</div>
</body>

<!--
 * ScanbotSDK Classic UI components require that you define and style a container element in your HTML.
 * For this example, we have chosen a full-screen always-on-top fixed position container that we show and hide
-->
<div id="document-scanner-container" style="
    display: none;
    width: 100%;
    height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999;
    background-color: rgba(0, 0, 0, 0.8);
"></div>

<script type="module">
    import "https://cdn.jsdelivr.net/npm/scanbot-web-sdk@8.0.0-beta.5/bundle/ScanbotSDK.ui2.min.js";

    /**
     * WARNING!
     * We strongly recommend AGAINST using jsdelivr for your production environment.
     * Please download the SDK and host it on your server.
     * We only use it for the quickest proof-of-concept implementation.
     */
    const cdn = "https://cdn.jsdelivr.net/npm/scanbot-web-sdk@8.0.0-beta.5/bundle/bin/complete/";
    const sdk = await ScanbotSDK.initialize({ enginePath: cdn, licenseKey: "" });

    document.getElementById("document-classic").onclick = async () => {

        const container = document.getElementById("document-scanner-container");
        container.style.display = "block";

        const config = {
            container: container,
            onDocumentDetected: (response) => {
                const result = response.result.detectionResult;
                console.log(result);
                let text = `Document detected!\nStatus: ${result.status}\nClosing scanner in 3 seconds...`;
                toast(text);
                setTimeout(() => {
                    container.style.display = "none";
                    scanner.dispose();
                }, 3000);
            },
        };
        const scanner = await sdk.createDocumentScanner(config);
    }

    document.getElementById("barcode-rtuui").onclick = async () => {
        const config = new ScanbotSDK.UI.Config.BarcodeScannerScreenConfiguration();
        const result = await ScanbotSDK.UI.createBarcodeScanner(config);
        console.log(result);
        let text = `Found ${result.items.length} barcodes:\n`;
        result.items.forEach((item, index) => {
            const barcode = item.barcode;
            text += `\nBarcode ${index + 1}:\n`;
            text += `${barcode.text} (format: ${barcode.format})\n`;
        });
        toast(text);
    };

    document.getElementById("license-info").onclick = async () => {
        const result = await sdk.getLicenseInfo();
        console.log(result);
        let text = `License Information:\n`;
        text += `Status: ${result.status} (${result.licenseStatusMessage})\n`;
        text += `Expiration Date: ${new Date(result.expirationDateString).toLocaleDateString()}\n`;
        toast(text);
    };

    function toast(text) {
        Toastify({
            text: text,
            duration: 3000,
            newWindow: true,
            gravity: "bottom",
            position: "center",
            style: {
                background: "linear-gradient(to right, #00b09b, #96c93d)",
                wordWrap: "break-word",
                maxHeight: "200px",
                overflowY: "hidden",
            },
        }).showToast();
    }
</script>

<link rel="stylesheet" type="text/css" href="main.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

</html>




